# 智题云卷 - 申报书配图

> 以下图表使用 Mermaid 语法，可在 Typora、VS Code、语雀、飞书等工具中直接渲染
> 渲染后截图即可用于申报书

---

## 图1：系统整体架构图

```mermaid
flowchart TB
    subgraph 用户层["👤 用户层"]
        T["🧑‍🏫 教师端"]
        S["🧑‍🎓 学生端"]
    end
    
    subgraph 前端["🖥️ 前端应用层"]
        WEB["Next.js + React\nTailwindCSS"]
    end
    
    subgraph 后端["⚙️ 后端服务层"]
        API["FastAPI\nRESTful API"]
        AUTH["认证模块"]
        EXPORT["导出引擎"]
    end
    
    subgraph AI["🤖 AI 服务层"]
        GEMINI["Google Gemini\nVision API"]
        GPT["OpenAI\nGPT-4V"]
    end
    
    subgraph 数据["💾 数据层"]
        DB[("PostgreSQL\n题库数据")]
        CACHE[("Redis\n缓存")]
    end
    
    subgraph 输出["📄 导出模块"]
        LATEX["LaTeX\npdflatex"]
        DOCX["python-docx\nWord"]
    end
    
    T --> WEB
    S --> WEB
    WEB --> API
    API --> AUTH
    API --> GEMINI
    API --> GPT
    API --> DB
    API --> CACHE
    API --> EXPORT
    EXPORT --> LATEX
    EXPORT --> DOCX
```

---

## 图2：AI 题目识别流程图

```mermaid
flowchart LR
    subgraph 输入["📷 输入"]
        A["上传题目图片\n(手写/印刷)"]
    end
    
    subgraph AI处理["🤖 AI 多模态处理"]
        B["图像预处理"]
        C["Gemini/GPT-4V\n视觉识别"]
        D["结构化解析"]
    end
    
    subgraph 输出结果["📋 识别结果"]
        E["题干文本\n(LaTeX公式)"]
        F["几何图形\n(SVG/TikZ)"]
        G["知识点标签"]
        H["难度评估"]
    end
    
    subgraph 审核["✅ 人工审核"]
        I["教师审核修正"]
        J["入库保存"]
    end
    
    A --> B --> C --> D
    D --> E
    D --> F
    D --> G
    D --> H
    E & F & G & H --> I --> J
```

---

## 图3：智能组卷与导出流程

```mermaid
flowchart TB
    subgraph 选题["📚 选题阶段"]
        A["从题库选择题目"]
        B["设置试卷参数\n(题型/分值/难度)"]
    end
    
    subgraph 分析["📊 智能分析"]
        C["AI 分析难度分布"]
        D["知识点覆盖检查"]
        E["试卷结构优化建议"]
    end
    
    subgraph 导出["📄 导出生成"]
        F{"选择导出格式"}
        G["LaTeX 模板渲染"]
        H["pdflatex 编译"]
        I["python-docx 生成"]
        J["📕 PDF 试卷"]
        K["📘 Word 试卷"]
    end
    
    A --> B --> C --> D --> E
    E --> F
    F -->|PDF| G --> H --> J
    F -->|Word| I --> K
```

---

## 图4：技术栈全景图

```mermaid
mindmap
  root((智题云卷))
    前端技术
      Next.js 14
      React 18
      TailwindCSS
      shadcn/ui
      KaTeX 公式渲染
    后端技术
      FastAPI
      SQLAlchemy
      Pydantic
      Alembic 迁移
    AI 能力
      Google Gemini
      OpenAI GPT-4V
      多模态识别
      LaTeX 公式提取
      几何图形重绘
    数据存储
      PostgreSQL
      SQLite 开发
      Redis 缓存
    导出引擎
      LaTeX/pdflatex
      python-docx
      TikZ 图形
      SVG 转换
    部署运维
      Docker
      Docker Compose
      Nginx
```

---

## 图5：数据流向图

```mermaid
sequenceDiagram
    participant 教师
    participant 前端
    participant 后端API
    participant AI服务
    participant 数据库
    participant 导出引擎
    
    教师->>前端: 上传题目图片
    前端->>后端API: POST /api/teacher/analyze
    后端API->>AI服务: 调用 Gemini/GPT-4V
    AI服务-->>后端API: 返回识别结果 JSON
    后端API-->>前端: 展示识别结果
    教师->>前端: 审核确认/修改
    前端->>后端API: POST /api/teacher/questions
    后端API->>数据库: 保存题目
    
    教师->>前端: 创建试卷/选题
    前端->>后端API: POST /api/teacher/papers
    后端API->>数据库: 保存试卷
    
    教师->>前端: 导出试卷
    前端->>后端API: GET /api/teacher/papers/{id}/export
    后端API->>导出引擎: 生成 LaTeX/Word
    导出引擎-->>后端API: 返回文件
    后端API-->>前端: 下载文件
    前端-->>教师: 获得 PDF/Word 试卷
```

---

## 图6：项目计划甘特图

```mermaid
gantt
    title 智题云卷开发计划
    dateFormat  YYYY-MM
    section 第一阶段
    后端API开发           :done, a1, 2025-01, 2025-02
    AI识别服务集成        :done, a2, 2025-01, 2025-02
    section 第二阶段
    前端界面开发          :active, b1, 2025-03, 2025-04
    组卷功能实现          :b2, 2025-03, 2025-04
    section 第三阶段
    系统测试优化          :c1, 2025-05, 2025-06
    教师反馈迭代          :c2, 2025-05, 2025-06
    section 第四阶段
    项目报告撰写          :d1, 2025-07, 2025-08
    成果展示推广          :d2, 2025-07, 2025-08
```

---

## 使用说明

1. 复制上述 Mermaid 代码块
2. 粘贴到支持 Mermaid 的编辑器中渲染
3. 截图保存为 PNG/JPG
4. 插入到申报书 Word 文档中

**推荐渲染工具：**
- Typora（本地）
- VS Code + Markdown Preview Mermaid 插件
- [Mermaid Live Editor](https://mermaid.live)（在线）
- 语雀/飞书文档（在线）
